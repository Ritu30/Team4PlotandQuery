<!DOCTYPE html>
<html>
<body>

<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<!-- Latest compiled JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>



<div class="container">
<h3>Click the button to create a File Upload Button.</h3>

<input class= "btn btn-primary" type="file" name="file" id="myfile">

	<button type="button" class="btn btn-success" onclick="myFunction()">Get path</button>
</div>
<!--<input type="file" name="file" id="approveletter">-->
<script>
document.getElementById('myfile').addEventListener('change', checkFile, false);
//approveletter.addEventListener('change', checkFile, false);

function checkFile(e) {

    var file_list = e.target.files;

    for (var i = 0, file; file = file_list[i]; i++) {
        var sFileName = file.name;
        var sFileExtension = sFileName.split('.')[sFileName.split('.').length - 1].toLowerCase();
        var iFileSize = file.size;
        var iConvert = (file.size / 10485760).toFixed(2);

        if (!(sFileExtension === "json") ) {
            txt = "File type : " + sFileExtension + "\n\n";
            //txt += "Size: " + iConvert + " MB \n\n";
            txt += "Please make sure your file is json format and less than 10 MB.\n\n";
            alert(txt);
        }
    }
	///using ajax for posting the json data
		var xmlhttp = new XMLHttpRequest();
		xmlhttp.onreadystatechange = function() {
		if (this.readyState == 4 && this.status == 200) {
			myObj = JSON.parse(this.responseText);
			document.getElementById("demo").innerHTML = myObj.name;
			}
		};
	xmlhttp.open("POST", "/localhost:64436/parsejson", true);
	xmlhttp.send();
	
}
function myFunction() {
    var x = document.getElementById("myfile").value;
    //document.getElementById("demo").innerHTML = x;
	alert(x);
}
</script>

<!--<script>
function myFunction() {
    var x = document.createElement("INPUT");
    x.setAttribute("type", "file");
    document.body.appendChild(x);
}

function getExtension(filename)
 {
    var parts = filename.split('.');
    return parts[parts.length - 1];
}

</script>-->

</body>
</html>